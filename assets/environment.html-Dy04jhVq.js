import{_ as s,c as o,a,e as l,f as i,d as n,b as r,r as d,o as c}from"./app-Bn9GZJrW.js";const u={};function p(m,e){const t=d("RouteLink");return c(),o("div",null,[e[5]||(e[5]=a("h1",{id:"development-environment",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#development-environment"},[a("span",null,"Development Environment")])],-1)),e[6]||(e[6]=a("p",null,[a("em",null,"Common actions taken to maintain a development environment.")],-1)),e[7]||(e[7]=a("h2",{id:"getting-started",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#getting-started"},[a("span",null,"Getting started")])],-1)),a("ul",null,[a("li",null,[l(t,{to:"/develop/Install/Development/Native/"},{default:i(()=>e[0]||(e[0]=[n("Install")])),_:1}),e[1]||(e[1]=n(" TaxonWorks locally"))]),e[2]||(e[2]=a("li",null,"Setup your code editor (IDE)",-1)),e[3]||(e[3]=a("li",null,"...",-1)),e[4]||(e[4]=a("li",null,"Code!",-1))]),e[8]||(e[8]=r(`<h2 id="ide" tabindex="-1"><a class="header-anchor" href="#ide"><span>IDE</span></a></h2><p>The core team writes code in VSCode and/or a flavour of vim, we&#39;ve used RubyMine in the past as well.</p><h2 id="day-to-day-maintenance" tabindex="-1"><a class="header-anchor" href="#day-to-day-maintenance"><span>Day-to-day maintenance</span></a></h2><p><em>A list of commonly executed development patterns.</em></p><p>The codebase changes relatively rapidly. There are some general patterns that you can follow to ensure syncing and keeping your development environment up to date does not give you a headache.</p><h3 id="pull-bundle-install-migrate" tabindex="-1"><a class="header-anchor" href="#pull-bundle-install-migrate"><span>Pull, bundle, install, migrate</span></a></h3><p><em>assumes you&#39;re in the TaxonWorks path</em></p><ul><li><code>git pull</code> get the latest code</li><li>run a test or two to see that your environment is not borked <code>spring rspec spec/models/otu_spec.rb</code></li></ul><p>You might also:</p><ul><li><code>bundle install</code> to update TaxonWorks&#39; Ruby Gem dependencies</li><li><code>npm install</code> to update TaxonWorks&#39; Javascript dependencies</li><li><code>rake db:migrate</code> to update TaxonWorks database schema</li></ul><h3 id="enter-the-app-shell" tabindex="-1"><a class="header-anchor" href="#enter-the-app-shell"><span>Enter the app shell</span></a></h3><ul><li>Open a terminal</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">cd /path/to/taxonworks/</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If using <a href="https://github.com/SpeciesFileGroup/install_taxonworks/blob/master/development/docker/README.md" target="_blank" rel="noopener noreferrer">Docker environment</a> then continue with:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker compose exec app bash</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That puts you in a bash shell inside the linux Docker image. Older installations may require <code>docker-compose</code> instead of <code>docker compose</code>.</p><h3 id="enter-the-rails-console" tabindex="-1"><a class="header-anchor" href="#enter-the-rails-console"><span>Enter the Rails console</span></a></h3><ul><li>Enter the app shell (see above), or simply in native environment</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">rails c</span>
<span class="line">exit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>From here you can play around with Rails models and query the state of the application. See below for an example of creating a new user by running <code>create!</code> on the <code>User</code> model.</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>Take care when performing database operations from the console, you have direct access to your app&#39;s data there. If you&#39;re just interested in playing around or trying something out to see how it will work, you can use <code>rails console --sandbox</code> instead - any changes you make from sandbox mode will be rolled back when you exit.</p></div><h3 id="create-a-taxonworks-user-from-the-console" tabindex="-1"><a class="header-anchor" href="#create-a-taxonworks-user-from-the-console"><span>Create a TaxonWorks user from the console</span></a></h3><p>A fresh install of TaxonWorks doesn&#39;t include any users. This section covers creating a single user, or read on below for creating a project, users, and some seed data all at once.</p><ul><li>Enter the Rails console (see above)</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">User.create!(name: &#39;you&#39;, password: &#39;password&#39;, password_confirmation: &#39;password&#39;, self_created: true, is_administrator: true, email: &#39;user@example.com&#39;)</span>
<span class="line">quit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="seed-a-project-users-and-some-data-from-the-command-line" tabindex="-1"><a class="header-anchor" href="#seed-a-project-users-and-some-data-from-the-command-line"><span>Seed a project, users, and some data from the command line</span></a></h3><ul><li>Enter the app shell (see above)</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">bundle exec rails db:seed</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Alternatively if you&#39;re using Docker you can execute the command above straight from the TaxonWorks directory using <code>docker compose</code>:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker compose exec app bundle exec rails db:seed</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This creates an admin and a non-admin user, which are admin@example.com and user@example.com respectively, both with password <code>taxonworks</code>.</p><h3 id="run-asynchronous-code-active-jobs-delayed-jobs" tabindex="-1"><a class="header-anchor" href="#run-asynchronous-code-active-jobs-delayed-jobs"><span>Run asynchronous code / active jobs / delayed jobs</span></a></h3><p>Running <code>rails s</code> is not enough to make queued jobs run since the way it is setup they don&#39;t run in-process. Certain downloads, for example, exist as queued jobs and won&#39;t be available until those jobs are run.</p><p>To make them run open up a new app shell and run <code>rails jobs:work</code>; this will run any existing jobs and then sit and watch for new jobs to run as they come in. You may notice that the CPU usage may constantly be reaching 100% for short bursts (and also speed up your CPU fan). If this is an inconvenience to you, or you wish to control when it is a good time to start working off jobs you may instead use <code>rails jobs:workoff</code>. This command will run all existing pending jobs and then exit.</p>`,34))])}const b=s(u,[["render",p],["__file","environment.html.vue"]]),v=JSON.parse('{"path":"/develop/Code/environment.html","title":"Development Environment","lang":"en-US","frontmatter":{"sidebarPosition":2},"headers":[{"level":2,"title":"Getting started","slug":"getting-started","link":"#getting-started","children":[]},{"level":2,"title":"IDE","slug":"ide","link":"#ide","children":[]},{"level":2,"title":"Day-to-day maintenance","slug":"day-to-day-maintenance","link":"#day-to-day-maintenance","children":[{"level":3,"title":"Pull, bundle, install, migrate","slug":"pull-bundle-install-migrate","link":"#pull-bundle-install-migrate","children":[]},{"level":3,"title":"Enter the app shell","slug":"enter-the-app-shell","link":"#enter-the-app-shell","children":[]},{"level":3,"title":"Enter the Rails console","slug":"enter-the-rails-console","link":"#enter-the-rails-console","children":[]},{"level":3,"title":"Create a TaxonWorks user from the console","slug":"create-a-taxonworks-user-from-the-console","link":"#create-a-taxonworks-user-from-the-console","children":[]},{"level":3,"title":"Seed a project, users, and some data from the command line","slug":"seed-a-project-users-and-some-data-from-the-command-line","link":"#seed-a-project-users-and-some-data-from-the-command-line","children":[]},{"level":3,"title":"Run asynchronous code / active jobs / delayed jobs","slug":"run-asynchronous-code-active-jobs-delayed-jobs","link":"#run-asynchronous-code-active-jobs-delayed-jobs","children":[]}]}],"git":{"updatedTime":1733247492000,"contributors":[{"name":"Beecher Baker","email":"bill@orangecrayon.com","commits":1,"url":"https://github.com/Beecher Baker"},{"name":"W Beecher Baker","email":"wbbaker@purdue.edu","commits":1,"url":"https://github.com/W Beecher Baker"},{"name":"mjy","email":"diapriid@gmail.com","commits":1,"url":"https://github.com/mjy"}]},"filePathRelative":"develop/Code/environment.md"}');export{b as comp,v as data};
